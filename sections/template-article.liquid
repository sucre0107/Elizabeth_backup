<article class="flex flex-col items-center" itemscope itemtype="https://schema.org/BlogPosting">
	{% for block in section.blocks %}
		{% case block.type %}
			<!--article title-->
			{% when 'article_title' %}
				<div class="flex flex-col items-center">
					<div class="max-w-7xl text-center">
						<a href="{{ blog.url }}"
						   class="my-3 text-base uppercase text-gray-500 hover:text-gray-900 font-bold">{{ blog.title }}</a>
					</div>
					<div class="max-w-7xl text-center">
						<h1 class="text-4xl md:text-6xl font-medium" itemprop="headline">{{ article.title }}</h1>
					</div>
				</div>

				<!--article author-->
			{% when 'article_author' %}
				<div class="flex items-center justify-center">
					<div class="max-w-7xl text-center" itemscope itemtype="https://schema.org/Person">
						{% if section.settings.enable_author %}
							<span class="" itemprop="author">{{ article.author }}</span>
						{% endif %}
					</div>
				</div>

				<!--article published date-->
			{% when 'article_published_date' %}
				<div class="flex items-center justify-center">
					<div class="max-w-7xl text-center">
						{% if section.settings.enable_published_date %}
							<time itemprop="datePublished dateCreate"
								  datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'on_date' }}</time>
						{% endif %}
					</div>
				</div>

				<!--article image-->
			{% when 'article_image' %}
				<div itemprop="image" class="max-w-7xl bg-blue-100 rounded-lg mx-auto overflow-hidden">
					{% if article.image != blank %}
						<img class="w-full h-80 md:h-96 object-cover object-center p-5"
							 src="{{ article.image | img_url: 'large' }}" alt="{{ article.image.alt }}">
					{% else %}
						{% assign placeholder_image = 'lifestyle-2' %}
						{{ placeholder_image | placeholder_svg_tag: 'w-full h-80 md:h-96 object-cover object-center' }}
					{% endif %}
				</div>



				<!--article content-->
			{% when 'article_content' %}
				<div itemprop="articleBody" class="flex flex-col items-center max-w-7xl px-10 overflow-auto">
					{{ article.content }}
				</div>

			{% else %}
		{% endcase %}
	{% endfor %}
</article>

<!-- seo json -->
<script type="application/ld+json">
    {
        "@context":"https://schema.org",
        "@type":"BlogPosting",
        "headline":{{ article.title | json }},
        "articleBody":{{ article.content | strip_html | json }},
        {% if article.excerpt != blank %}
        "description":{{ article.excerpt | strip_html | json }},
        {% endif %}
        {% if article.image %}
         "image": [
         	{{ article.image | img_url: "medium" | json }}
            ],
        {% endif %}
        "datePublished":{{ article.published_at | date: format: "default" | json }},
        "dateCreated":{{ article.created_at | date: format: "default" | json }},
        "author": {
        	"@type":"Person",
        	"name":{{ article.author | json }}
        },
        "publisher":{
        	"@type":"Organization",
        	"name":{{ shop.name | json }}
        }
    }
</script>


<!--comments func-->
{% if blog.comments_enabled? %}
	<div id="comments" class="my-8">
		{% if article.comments_count > 0 %}
			<!--comment display area-->
			<div class="flex-1 items-center justify-center mx-auto max-w-4xl">
					<h1 class="text-lg mb-4 font-medium">
					</h1>

				{% paginate article.comments by 5 %}
					{% for comment in article.comments %}
						<div class="flex-1 border my-4 px-4 py-2 sm:py-4 leading-relaxed">
							<span class="comment-author">{{ comment.author }}</span>
							<span class="text-xs text-gray-400">{{ comment.created_at | date: format: 'date' }}</span>
							<p class="text-sm">
								{{ comment.content }}
							</p>
						</div>
					{% endfor %}

					<!--pagination-->
					{% comment %}
					{% if paginate.pages > 1 %}
						{ paginate | default_pagination }}
					{% endif %}
					{% endcomment %}
					<!--custom pagination-->
					<div class="flex max-w-6xl mx-auto">
						{% render 'pagination',pagination:paginate %}
					</div>


				{% endpaginate %}
			</div>

		{% else %}
			There are no comments in this article.
		{% endif %}
	</div>
{% endif %}

<!-- new comments area -->
<div id="comment_form">
	{% form 'new_comment', article %}
		<div class="flex-1 mx-auto items-center justify-center max-w-4xl px-4">
			{% if form.errors %}
				<div class="border p-5">
					<div class="flex flex-row items-center w-full my-3">
						<div class="text-red-500">
							{% render 'icon-fail' %}
						</div>
						<div class="text-sm font-medium ml-3">
							Oh,NO!Your Comment was not posted
						</div>
					</div>
					<ul class="px-4 mb-3 ml-7 list-decimal">
						{% for error in form.errors %}
							<li>
								<span>{{ form.errors.messages[error] }}</span>
							</li>

						{% endfor %}
					</ul>
				</div>
			{% elsif form.posted_successfully? %}
				<div class="flex flex-row items-center w-full my-3 p-5">
					<div class="text-green-500">
						{% render 'icon-success' %}
					</div>
					<div class="text-sm font-medium ml-3">
						Comment is posted successfully!
					</div>
				</div>
			{% endif %}

			<div class="px-1 md:flex mb-3">
				<!--name input-->
				<div class="px-3 md:w-1/2">
					<lable for="comment_author" class="text-gray-700 font-medium uppercase text-xs mb-2">
						Name
					</lable>
					<input
							type="text" name="comment[author]"
							id="comment_author"
							class="w-full text-gray-700 border py-3 px-4 mb-3 focus:outline-none"
							placeholder="Sucre Qiu"
							required
					>
				</div>
				<!--email input-->
				<div class="px-3 md:w-1/2">
					<lable for="comment_email" class="text-gray-700 font-medium uppercase text-xs mb-2">
						Email
					</lable>
					<input
							type="email" name="comment[email]"
							id="comment_email"
							class="w-full text-gray-700 border py-3 px-4 mb-3 focus:outline-none"
							placeholder="sucre@qiu.com"
							required
					>
				</div>
			</div>
			<!--comment content input-->
			<div class="px-1 md:flex mb-3">
				<div class="md:w-full px-3">
					<lable for="comment_content" class="text-gray-700 font-medium uppercase text-xs mb-2">
						Comment
					</lable>
					<textarea
							class="w-full text-gray-700 resize-none h-20 py-2 px-3 focus:outline-none border"
							name="comment[body]"
							id="comment_content"
							required>
                    </textarea>
				</div>
			</div>
			<!--submit button-->
			<div class="px-1 md:flex mb-3">
				<input type="submit"
					   class="w-full cursor-pointer px-4 py-2 border text-base font-medium text-white bg-green-900 hover:bg-gray-500"
					   value="Submit">
			</div>

		</div>
	{% endform %}

</div>







{% schema %}
{
  "name": "博客文章模板",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_author",
      "default": true,
      "label": "勾选，显示作者姓名"
    },
    {
      "type": "checkbox",
      "id": "enable_published_date",
      "default": true,
      "label": "勾选，显示发布时间"
    }
  ],
  "blocks": [
    {
      "type": "article_title",
      "name": "标题",
      "limit": 1
    },
    {
      "type": "article_author",
      "name": "作者",
      "limit": 1
    },
    {
      "type": "article_published_date",
      "name": "发布日期",
      "limit": 1
    },
    {
      "type": "article_image",
      "name": "图片",
      "limit": 1
    },
    {
      "type": "article_content",
      "name": "文章内容",
      "limit": 1
    }
  ]
}
{% endschema %}